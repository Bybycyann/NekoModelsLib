# 更新日志

## 25/1/7

项目正式开始,Bata版本预规划.

## 25/1/14

逻辑构建完善, 正式发布v1.0版本.

- 添加了初始化标签文件 `model_reg.json`&`template_reg.json` 每次重启数据包会自动更新data文件夹中的模型和模板数据；
- 添加了一个调试功能, 隶属文件 `debug.mcfunction`, 执行该文件可以获取附近自定义模型的各项数据值;
- 添加了帮助功能, 隶属文件 `help.mcfunction`, 执行该文件可以在聊天栏打开帮助目录;
- 添加了give函数以便玩家更容易的获取模型刷怪蛋;
- 重构了模型数据结构的event部分, 添加了 **事件组(EventGroup)** 让自定义事件自由度更高；
- 为模型添加了是否启用双击检测的标签, 现在可以通过修改模型 `event` 里的 `dbl(T/F)` 属性来 打开/关闭 模型的双击检测, 无该参数时默认为 `false`.

## 25/1/19~24

> 中途丢了一次数据, 可能有些内容不全...

- 优化了 `tick` 函数监视模型事件的逻辑, 现在基本不用担心模型数过多导致服务器卡顿的问题了, 但是对 FPS 的影响仍然存在;
- 添加了旋转(rotate)和平移(move)事件组;
- 添加了新的道具"扳手", 可以通过铁砧命名的方式来输入参数与模型交互;
- 强化了单一事件组的独立性, 利用更高一级的复合事件组可以协调调用各事件组和事件;
- 在双击检测的逻辑上做了一些补丁,单击事件的玩家数据也可以完整存在交互实体的数据中而不会被删除 , 以便于使用 `execute (if|unless) on ...` 命令来选取交互对象, 减少了宏的使用;
- 添加了骑乘(ride)事件, 支持参量控制骑乘高度.

## 25/1/27

- 添加了新的命名空间 `nkfurniture` 后期打算更名为 `nkworkblock` 抑或将其内容并入 `nkmode` 命名空间下. 其主要功能是为了方便玩家创建自定义工作方块;
- 加入了新的工作方块**家具装配台**, 其功能由 `nkfurniture` 实现, 需要 `nkmodel` 做为模型显示的前置支持;
- 后期打算根据实体谓词重构 `tick` 函数中对于家具实体的检测, 尝试解决实体同格堆叠绑定的bug.

## 25/1/28

- 微调了索引结构, 更名 `size` 为 `transformation`,并将除其外的展示实体数据整个存入 `display` 字段下.

## 25/1/30

- 命名空间 `nkworkblock` 下新增了**容器(container)**的数据存储, 

## 25/2/3

- `nkworkblock` 命名空间下新增了 `open.json` 的成就触发器, 以在玩家打开目标工作方块时向Marker实体添加玩家的UUID来保证操作不会错乱.

## 25/2/4

- 为实现对玩家视线选取方块的定位, 添加了**射线投射(Raycast)**功能, 并为其创建了新的数据包项目**NekoToolKit**汇总功能性函数方便管理和调用. 但其在视线处于方块边界时仍会无法识别,后期考虑更换方块抓取方式.

## 25/2/5

- [**NekoToolKit**]\: 新增**列表重组(Regroup)**功能, 用于检查和剔除列表中的元素.

## 25/2/6

- [**NekoToolKit**]\: 调整了 Regroup 函数的结构, 从原来的宏遍历改为列表旋转遍历;
- 根据 Regroup 函数完善了 player 对工作方块的解绑功能.